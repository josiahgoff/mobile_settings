// Math helper function for Handlebars
function countHeroes(e){var t=$(".hero",e).not(".hidden .hero, .hidden.hero").length;return t}function updateHeroCount(e,t){$(".hero-count",t).not(".hidden .hero-count, .hidden.hero-count").text(e)}function updateUI(){var e=$(".tab-pane.active");$("[data-show-req]").each(function(){var e=0,t=$(this).attr("data-show-req").split(/\s+/);for(var n=0;n<t.length;n++)$('[data-req-name="'+t[n]+'"]').is(":checked")||e++;e>0&&!$(this).hasClass("hidden")?$(this).addClass("hidden"):e===0&&$(this).hasClass("hidden")&&$(this).removeClass("hidden")});$("[data-hide-req]").each(function(){var e=0,t=$(this).attr("data-hide-req").split(/\s+/);for(var n=0;n<t.length;n++)$('[data-req-name="'+t[n]+'"]').is(":checked")||e++;e>0&&$(this).hasClass("hidden")?$(this).removeClass("hidden"):e===0&&!$(this).hasClass("hidden")&&$(this).addClass("hidden")});updateHeroCount(countHeroes(e),e)}Handlebars.registerHelper("math",function(e,t,n,r){if(arguments.length<4){r=n;n=t;t="+"}e=parseFloat(e);n=parseFloat(n);return{"+":e+n,"-":e-n,"*":e*n,"/":e/n,"%":e%n}[t]});jQuery.fn.outputCode=function(){var e=$(this),t=e.find(".code-output"),n={},r=$("#code-output-template").html(),i=Handlebars.compile(r),s=[];n.heroLayout=e.find("input[name='hero-layouts']:checked").val();n.heroLayoutSetup=e.find("input[name='hero-layouts-setup']:checked").val();$(".hero",e).not(".hidden .hero, .hidden.hero").each(function(){var e={};e.src=$(this).find('[name="hero-image"]').val();e.title=$(this).find('[name="hero-title"]').val();e.link=$(this).find('[name="hero-link"]').val();s.push(e)});n.heroes=s;n.heroLayoutSetup==="auto"?n.heroCount=$('input[name="hero-count"]').not('.hidden input[name="hero-count"], input[name="hero-count"].hidden').val():n.heroCount=s.length;n.bodyNav=e.find("input[name='home-body-nav']:checked").val();t.html($.trim(i(n)))};jQuery.fn.addRow=function(){var e=$(this),t={},n=e.attr("data-template"),r=$("#"+n).html(),i=Handlebars.compile(r);e.append(i(t))};$(document).ready(function(){$(".nav-tabs a").click(function(e){e.preventDefault();$(this).tab("show")});$(".js-add-row").each(function(){$(this).addRow()});$('[name="hero-repeaters"]').delegate(".js-delete-row","click",function(e){$(this).closest(".row").remove();updateUI()});$(".js-add-row-trigger").click(function(e){var t=$(this).attr("name"),n=$("#"+t);n.addRow();updateUI()});$(".js-convert-trigger").click(function(e){var t=$(this).closest(".tab-pane");t.outputCode()});$(".js-update-ui").click(function(){updateUI()});updateUI()});